version: "3.7"
services:
    logstash:
        build: ./logstash
        ports:
            - "5044:5044"
        depends_on: 
            - elasticsearch
        networks:
            - elk
    elasticsearch:
        image: elasticsearch:6.8.11
        ports:
            - "9100:9100"
            - "9200:9200"
            - "9300:9300"
        networks:
            - elk
        shm_size: "2GB"
                
    kibana:
        image: kibana:6.8.11
        volumes:
            - ./kibana.yml:/etc/kibana/kibana.yml
        ports:
            - "5601:5601"
        depends_on: 
            - elasticsearch
        networks:
            - elk
networks:
    elk:
        driver: bridge